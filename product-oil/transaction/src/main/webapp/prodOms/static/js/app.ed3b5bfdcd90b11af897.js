webpackJsonp([1],{"41U1":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("7+uW"),n=a("/ocq"),i="https://transaction9.mycrudeoil.com/",s={select:i+"pages/backgroundom/my_contract/getallpulldowndata.json",tableList:i+"pages/backgroundom/my_contract/contractSheetList.json",show:i+"pages/back/my_contract_detail/omContractSheetSummarily.json",upload:i+"pages/backgroundom/my_contract/setcontractextend.json",action:i+"common/doc/upload.json",edit:i+"pages/backgroundom/my_contract/getcontractextend.json",download:i+"exportContractSheet.json"};function r(t){return t<10?"0"+t:t}function o(t){var e="";if(t){var a=new Date(t),l=a.getFullYear(),n=a.getMonth()+1,i=a.getDate();e=l+"-"+(n=r(n))+"-"+(i=r(i))}return e}var c={data:function(){return{totalNum:"",options:{},tableData:[],time:"",query:{serialNumber:"",pageNum:1,pageSize:10,contractNO:"",gmtCreatedStartAsString:"",gmtCreatedEndAsString:"",productCategoryCode:"",tradeTermCode:"",contractSheetStatusCode:"",dischargePort:""}}},watch:{value:function(t){}},created:function(){console.log(this),this.screen(),this.tableList()},methods:{download:function(){this.ajax(s.download,this.query,"post").then(function(t){window.open(t.data.datas)})},upload:function(t){this.$router.push({name:"show",query:{uuid:t.uuid,url:t.endpoint,state:t.upInvoiceStatus}})},edit:function(t){this.$router.push({name:"show",query:{uuid:t.uuid,url:t.endpoint,state:t.upInvoiceStatus}})},preview:function(t){var e=this;this.ajax(s.show,{uuid:t.uuid},"get").then(function(t){var a=t.data.datas;e.$alert('<div class="pop"><ul><li>基本信息 </li><li>油品：<span>'+a.productCategory+"</span> </li><li>规格：<span>"+a.productSpecification+"</span> </li><li>数量：<span>"+a.quantity+"</span> </li><li>溢短装：<span>"+a.tolerance+"</span> </li><li>国际贸易条款：<span>"+a.tradeTerm+"</span> </li></ul><ul><li>价格 </li><li>计价基准：<span>"+a.pricingBenchmark+"</span> </li><li>升贴水：<span>"+a.premiumsAndDiscounts+"</span> </li><li>计价期：<span>"+a.pricingPeriod+"</span> </li><li>付款条件：<span>"+a.paymentTerm+"</span> </li><li>商检费分摊：<span>"+a.inspection+"</span> </li><li>Law：<span>"+a.law+"</span> </li><li>计价公式：<span>"+a.pricingFormula+"</span> </li></ul><ul><li> 船运</li><li> 运输方式：<span>"+a.transportMode+"</span></li><li> 装货港：<span>"+a.dischargePort+"</span></li><li> 装期:<span>"+a.laycanDateAsString+"</span></li><li> 滞期费率:<span>"+a.demurrageRateNum+"</span></li></ul><ul><li> 买家</li><li> 公司名称：<span>"+a.buyerName+"</span></li><li> 公司地址：<span>"+a.buyerAddress+"</span></li><li> 联系人:<span>"+a.buyerTraderName+"</span></li><li> 电话:<span>"+a.buyerTelephone+"</span></li><li> 邮箱:<span>"+a.buyerEmail+"</span></li><li> 传真:<span>"+a.buyerFax+"</span></li></ul><ul><li> 卖家</li><li> 公司名称：<span>"+a.salerName+"</span></li><li> 公司地址：<span>"+a.salerAddress+"</span></li><li> 联系人:<span>"+a.salerTraderName+"</span></li><li> 电话:<span>"+a.salerTelephone+"</span></li><li> 邮箱:<span>"+a.salerEmail+"</span></li><li> 传真:<span>"+a.salerFax+"</span></li></ul><ul><li> 其他信息</li><li> 其他条款<span>"+a.otherTerm+"</span></li></ul></div>","订单详情",{dangerouslyUseHTMLString:!0})})},handleSizeChange:function(t){this.query.pageSize=t},handleCurrentChange:function(t){this.query.pageNum=t,this.tableList()},screen:function(){var t=this;this.ajax(s.select,{},"get").then(function(e){t.options=e.data.datas})},tableList:function(){var t=this;this.query.gmtCreatedStartAsString=o(this.time[0]),this.query.gmtCreatedEndAsString=o(this.time[1]),this.ajax(s.tableList,this.query,"post").then(function(e){t.tableData=e.data.datas,t.totalNum=t.tableData.length})},reset:function(){this.time="",this.query={serialNumber:"",pageNum:1,pageSize:10,contractNO:"",gmtCreatedStartAsString:"",gmtCreatedEndAsString:"",productCategoryCode:"",tradeTermCode:"",contractSheetStatusCode:"",dischargePort:""},this.tableList()}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"list"},[a("li",[a("em",[t._v("油品:")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.query.productCategoryCode,callback:function(e){t.$set(t.query,"productCategoryCode",e)},expression:"query.productCategoryCode"}},t._l(t.options.category,function(t){return a("el-option",{key:t.code,attrs:{label:t.zhName,value:t.code}})}))],1),t._v(" "),a("li",[a("em",[t._v("订单状态:")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.query.contractSheetStatusCode,callback:function(e){t.$set(t.query,"contractSheetStatusCode",e)},expression:"query.contractSheetStatusCode"}},t._l(t.options.status,function(t){return a("el-option",{key:t.code,attrs:{label:t.zhName,value:t.code}})}))],1),t._v(" "),a("li",[a("em",[t._v("贸易条款:")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.query.tradeTermCode,callback:function(e){t.$set(t.query,"tradeTermCode",e)},expression:"query.tradeTermCode"}},t._l(t.options.tradeTerms,function(t){return a("el-option",{key:t.code,attrs:{label:t.zhName,value:t.code}})}))],1),t._v(" "),a("li",[a("em",[t._v("卸港港口:")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.query.dischargePort,callback:function(e){t.$set(t.query,"dischargePort",e)},expression:"query.dischargePort"}},t._l(t.options.dischargePort,function(t){return a("el-option",{key:t.code,attrs:{label:t.zhName,value:t.enName}})}))],1),t._v(" "),a("li",[a("em",[t._v(" 订单编号:")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入单据编号",clearable:""},model:{value:t.query.serialNumber,callback:function(e){t.$set(t.query,"serialNumber",e)},expression:"query.serialNumber"}})],1),t._v(" "),a("li",[a("em",[t._v("合同编号:")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入合同编号",clearable:""},model:{value:t.query.contractNO,callback:function(e){t.$set(t.query,"contractNO",e)},expression:"query.contractNO"}})],1),t._v(" "),a("li",[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("时间范围")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)]),t._v(" "),a("li",[a("el-button",{attrs:{type:"primary"},on:{click:t.tableList}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.reset}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:t.download}},[t._v("下载")])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"serialNumber",label:"订单编号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contractNO",label:"合同编号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contractSheetStatus",label:"订单状态",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createuser",label:"创建人",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间",width:"240"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productCategory",label:"油品",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productSpecification",label:"规格",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"premiumsAndDiscounts",label:"升贴水",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"数量",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tradeTerm",label:"贸易条款",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tolerance",label:"溢短装",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pricingBenchmark",label:"基准",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pricingPeriod",label:"计价期",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"laycanDateAsString",label:"装期",width:"240"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dischargePort",label:"卸港",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"settleNum",label:"结算量",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"settleAmt",label:"结算金额",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"otherTerm",label:"其他",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.preview(e.row)}}},[t._v("预览")]),t._v(" "),0==e.row.upInvoiceStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.upload(e.row)}}},[t._v("上传")]):t._e(),t._v(" "),1==e.row.upInvoiceStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.edit(e.row)}}},[t._v("修改")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"block footer"},[a("el-pagination",{attrs:{background:"","page-sizes":[10],layout:"total, sizes, prev, pager, next, jumper",total:t.totalNum-0},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var p=a("VU/8")(c,u,!1,function(t){a("jl7B")},null,null).exports,d={data:function(){return{state:this.$route.query.state,url:this.$route.query.url,contractUUid:this.$route.query.uuid||"",proInvoiceList:[],settleInvoiceList:[],actionUrl:s.action,settleNum:"",settleNumUnit:"万吨",settleAmt:"",settleAmtUnit:"亿元",unit1:[{value:"万吨",label:"万吨"},{value:"万桶",label:"万桶"}],unit2:[{value:"亿元",label:"亿元"},{value:"亿美元",label:"亿美元"}]}},created:function(){var t=this;"1"===this.state&&this.ajax(s.edit,{contractUUid:this.contractUUid},"get").then(function(e){t.settleNum=e.data.datas.settleNum,t.settleNumUnit=e.data.datas.settleNumUnit,t.settleAmt=e.data.datas.settleAmt,t.settleAmtUnit=e.data.datas.settleAmtUnit,e.data.datas.proInvoiceList.forEach(function(t){t.url=t.endpoint+"/"+t.filePath}),e.data.datas.settleInvoiceList.forEach(function(t){t.url=t.endpoint+"/"+t.filePath}),t.settleInvoiceList=e.data.datas.settleInvoiceList,t.proInvoiceList=e.data.datas.proInvoiceList})},methods:{format:function(t){var e=[];return t.forEach(function(t){var a={};a.fileName=t.fileName,a.filePath=t.filePath,e.push(a)}),e},handleRemove1:function(t,e){for(var a=0;a<this.proInvoiceList.length;a++)this.proInvoiceList[a].filePath===t.filePath&&this.proInvoiceList.splice(a,1)},handleRemove2:function(t,e){for(var a=0;a<this.settleInvoiceList.length;a++)this.settleInvoiceList[a].filePath===t.response.datas.path&&this.settleInvoiceList.splice(a,1)},success1:function(t){var e={};e.fileName=t.datas.originalName,e.filePath=t.datas.path,e.url=this.url+"/"+t.datas.path,this.proInvoiceList.push(e)},success2:function(t){var e={};e.fileName=t.datas.originalName,e.filePath=t.datas.path,e.url=this.url+"/"+t.datas.path,this.settleInvoiceList.push(e)},confirm:function(){var t=this,e={contractUUid:this.contractUUid,proInvoiceList:this.format(this.proInvoiceList),settleInvoiceList:this.format(this.settleInvoiceList),settleNum:this.settleNum,settleNumUnit:this.settleNumUnit,settleAmt:this.settleAmt,settleAmtUnit:this.settleAmtUnit};this.ajax(s.upload,e,"post").then(function(e){t.$message({message:"上传成功",type:"success"}),t.$router.go(-1)})},cancel:function(){this.$router.go(-1)}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"show"},[a("h3",[t._v("上传合同")]),t._v(" "),a("div",[a("em",[t._v("结算量:")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",prop:"name"},model:{value:t.settleNum,callback:function(e){t.settleNum=e},expression:"settleNum"}}),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.settleNumUnit,callback:function(e){t.settleNumUnit=e},expression:"settleNumUnit"}},t._l(t.unit1,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",[a("em",[t._v("结算金额：")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.settleAmt,callback:function(e){t.settleAmt=e},expression:"settleAmt"}}),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.settleAmtUnit,callback:function(e){t.settleAmtUnit=e},expression:"settleAmtUnit"}},t._l(t.unit2,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"upload"},[a("em",[t._v("临时发票:")]),t._v(" "),a("el-upload",{attrs:{action:t.actionUrl,"list-type":"picture-card","on-remove":t.handleRemove1,"on-success":t.success1,"file-list":t.proInvoiceList}},[a("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),a("div",{staticClass:"upload"},[a("em",[t._v("结算发票:")]),t._v(" "),a("el-upload",{attrs:{action:t.actionUrl,limit:2,"list-type":"picture-card","on-remove":t.handleRemove2,"on-success":t.success2,"file-list":t.settleInvoiceList}},[a("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确认")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:t.cancel}},[t._v("取消")])],1)])},staticRenderFns:[]};var h=a("VU/8")(d,m,!1,function(t){a("xa3p")},null,null).exports;l.default.use(n.a);var v=new n.a({routes:[{path:"/",component:p},{path:"/screen",name:"screen",component:p},{path:"/show",name:"show",component:h}]}),f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var b=a("VU/8")({name:"App",data:function(){return{}}},f,!1,function(t){a("OutS")},"data-v-1dcfd721",null).exports,_=a("mtWM"),g=a.n(_);var y=function(t,e,a){var l=a||"post",n={url:t,method:l};return"get"===l.toLowerCase()?n.params=e:(n.data=e,n.headers={"content-Type":"application/json; charset=UTF-8"}),g()(n)},N=a("NYxO");l.default.use(N.a);var w=new N.a.Store({state:{show:!1}}),C=a("zL8q"),S=a.n(C);a("tvR6"),a("41U1");l.default.use(S.a),l.default.config.productionTip=!1,l.default.prototype.ajax=y,new l.default({el:"#app",router:v,store:w,components:{App:b},template:"<App/>"})},OutS:function(t,e){},jl7B:function(t,e){},tvR6:function(t,e){},xa3p:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ed3b5bfdcd90b11af897.js.map